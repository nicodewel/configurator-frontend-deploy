{"ast":null,"code":"import _regeneratorRuntime from\"/Users/vw7u456/projects/abschluss2/g3t6_zwischenpruefung_jahr2_gruppe07/configurator-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/vw7u456/projects/abschluss2/g3t6_zwischenpruefung_jahr2_gruppe07/configurator-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{getConfigurationAsList}from\"../util/util\";import{CALCULATE_PRICE}from\"./SelectAction\";export var SAVE_CONFIG=\"SAVE_CONFIG\";export var GET_ATTRIBUTES=\"GET_ATTRIBUTES\";export var NEW_CONFIG=\"NEW_CONFIG\";var BASE_URL=process.env.REACT_APP_BACKEND_URL;export var getNewConfig=function getNewConfig(configId){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var response,payload;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(BASE_URL,\"configuration/\").concat(configId));case 3:response=_context.sent;_context.next=6;return!response.ok;case 6:if(!_context.sent){_context.next=8;break;}return _context.abrupt(\"return\",false);case 8:_context.next=10;return response.json();case 10:payload=_context.sent;dispatch({type:NEW_CONFIG,payload:payload});dispatch({type:CALCULATE_PRICE});_context.next=19;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);console.log(_context.t0);return _context.abrupt(\"return\",false);case 19:return _context.abrupt(\"return\",true);case 20:case\"end\":return _context.stop();}}},_callee,null,[[0,15]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var postConfiguration=function postConfiguration(configuration){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var postObject,config,response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:config=getConfigurationAsList(configuration);config={id:configuration.id,carConfigAttributes:config.slice(0,config.length-2)};console.log(\"POSTCONFIG:\",config);_context2.prev=3;_context2.next=6;return fetch(BASE_URL+\"configuration\",{method:\"POST\",body:JSON.stringify(config),headers:{\"Content-Type\":\"application/json\",\"Accept\":\"application/json\"}});case 6:response=_context2.sent;_context2.next=9;return response.json();case 9:postObject=_context2.sent;dispatch({type:SAVE_CONFIG,payload:postObject});_context2.next=16;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](3);console.log(_context2.t0);case 16:return _context2.abrupt(\"return\",postObject);case 17:case\"end\":return _context2.stop();}}},_callee2,null,[[3,13]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var getAllAttributes=function getAllAttributes(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch){var response,payload;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return fetch(BASE_URL+\"attributes\");case 3:response=_context3.sent;_context3.next=6;return response.json();case 6:payload=_context3.sent;dispatch({type:GET_ATTRIBUTES,payload:payload});_context3.next=13;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[0,10]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export var getAllConfigIds=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var response,ids;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetch(BASE_URL+\"configurations/id\");case 2:response=_context4.sent;_context4.next=5;return response.json();case 5:ids=_context4.sent;return _context4.abrupt(\"return\",ids);case 7:case\"end\":return _context4.stop();}}},_callee4);}));return function getAllConfigIds(){return _ref4.apply(this,arguments);};}();","map":{"version":3,"names":["getConfigurationAsList","CALCULATE_PRICE","SAVE_CONFIG","GET_ATTRIBUTES","NEW_CONFIG","BASE_URL","process","env","REACT_APP_BACKEND_URL","getNewConfig","configId","dispatch","fetch","response","ok","json","payload","type","console","log","postConfiguration","configuration","config","id","carConfigAttributes","slice","length","method","body","JSON","stringify","headers","postObject","getAllAttributes","getAllConfigIds","ids"],"sources":["/Users/vw7u456/projects/abschluss2/g3t6_zwischenpruefung_jahr2_gruppe07/configurator-frontend/src/actions/FetchAction.js"],"sourcesContent":["import { getConfigurationAsList } from \"../util/util\";\nimport { CALCULATE_PRICE } from \"./SelectAction\";\n\nexport const SAVE_CONFIG = \"SAVE_CONFIG\";\nexport const GET_ATTRIBUTES = \"GET_ATTRIBUTES\"\nexport const NEW_CONFIG = \"NEW_CONFIG\"\n\nconst BASE_URL = process.env.REACT_APP_BACKEND_URL;\n\n\nexport const getNewConfig = (configId) => async (dispatch) => {\n  try {\n\n    const response = await fetch(`${BASE_URL}configuration/${configId}`);\n    if (await !response.ok) {\n      return false;\n    }\n    const payload = await response.json();\n    dispatch({\n      type: NEW_CONFIG,\n      payload: payload\n    })\n    dispatch({\n      type: CALCULATE_PRICE,\n    })\n  } catch (error) {\n    console.log(error);\n    return false;\n  }\n  return true;\n}\n\nexport const postConfiguration = (configuration) => async (dispatch) => {\n  let postObject;\n  let config = getConfigurationAsList(configuration);\n  config = { id: configuration.id, carConfigAttributes: config.slice(0, config.length - 2) };\n  console.log(\"POSTCONFIG:\", config);\n\n  try {\n    const response = await fetch(\n      BASE_URL + \"configuration\",\n      {\n        method: \"POST\",\n        body: JSON.stringify(config),\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Accept\": \"application/json\"\n        }\n      }\n    );\n    postObject = await response.json();\n    dispatch({\n      type: SAVE_CONFIG,\n      payload: postObject\n    });\n  } catch (error) {\n    console.log(error);\n  }\n  return postObject;\n}\n\nexport const getAllAttributes = () => async (dispatch) => {\n  try {\n    const response = await fetch(BASE_URL + \"attributes\");\n    const payload = await response.json();\n    dispatch({\n      type: GET_ATTRIBUTES,\n      payload: payload\n    });\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport const getAllConfigIds = async () => {\n  const response = await fetch(BASE_URL + \"configurations/id\");\n  const ids = await response.json();\n  return ids;\n\n}"],"mappings":"sXAAA,OAASA,sBAAT,KAAuC,cAAvC,CACA,OAASC,eAAT,KAAgC,gBAAhC,CAEA,MAAO,IAAMC,YAAW,CAAG,aAApB,CACP,MAAO,IAAMC,eAAc,CAAG,gBAAvB,CACP,MAAO,IAAMC,WAAU,CAAG,YAAnB,CAEP,GAAMC,SAAQ,CAAGC,OAAO,CAACC,GAAR,CAAYC,qBAA7B,CAGA,MAAO,IAAMC,aAAY,CAAG,QAAfA,aAAe,CAACC,QAAD,mGAAc,iBAAOC,QAAP,+KAGfC,MAAK,WAAIP,QAAJ,0BAA6BK,QAA7B,EAHU,QAGhCG,QAHgC,qCAI5B,CAACA,QAAQ,CAACC,EAJkB,kFAK7B,KAL6B,gCAOhBD,SAAQ,CAACE,IAAT,EAPgB,SAOhCC,OAPgC,eAQtCL,QAAQ,CAAC,CACPM,IAAI,CAAEb,UADC,CAEPY,OAAO,CAAEA,OAFF,CAAD,CAAR,CAIAL,QAAQ,CAAC,CACPM,IAAI,CAAEhB,eADC,CAAD,CAAR,CAZsC,iFAgBtCiB,OAAO,CAACC,GAAR,cAhBsC,gCAiB/B,KAjB+B,0CAmBjC,IAnBiC,uEAAd,gEAArB,CAsBP,MAAO,IAAMC,kBAAiB,CAAG,QAApBA,kBAAoB,CAACC,aAAD,oGAAmB,kBAAOV,QAAP,uJAE9CW,MAF8C,CAErCtB,sBAAsB,CAACqB,aAAD,CAFe,CAGlDC,MAAM,CAAG,CAAEC,EAAE,CAAEF,aAAa,CAACE,EAApB,CAAwBC,mBAAmB,CAAEF,MAAM,CAACG,KAAP,CAAa,CAAb,CAAgBH,MAAM,CAACI,MAAP,CAAgB,CAAhC,CAA7C,CAAT,CACAR,OAAO,CAACC,GAAR,CAAY,aAAZ,CAA2BG,MAA3B,EAJkD,wCAOzBV,MAAK,CAC1BP,QAAQ,CAAG,eADe,CAE1B,CACEsB,MAAM,CAAE,MADV,CAEEC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeR,MAAf,CAFR,CAGES,OAAO,CAAE,CACP,eAAgB,kBADT,CAEP,SAAU,kBAFH,CAHX,CAF0B,CAPoB,QAO1ClB,QAP0C,uCAkB7BA,SAAQ,CAACE,IAAT,EAlB6B,QAkBhDiB,UAlBgD,gBAmBhDrB,QAAQ,CAAC,CACPM,IAAI,CAAEf,WADC,CAEPc,OAAO,CAAEgB,UAFF,CAAD,CAAR,CAnBgD,qFAwBhDd,OAAO,CAACC,GAAR,eAxBgD,yCA0B3Ca,UA1B2C,yEAAnB,kEAA1B,CA6BP,MAAO,IAAMC,iBAAgB,CAAG,QAAnBA,iBAAmB,qGAAM,kBAAOtB,QAAP,qLAEXC,MAAK,CAACP,QAAQ,CAAG,YAAZ,CAFM,QAE5BQ,QAF4B,uCAGZA,SAAQ,CAACE,IAAT,EAHY,QAG5BC,OAH4B,gBAIlCL,QAAQ,CAAC,CACPM,IAAI,CAAEd,cADC,CAEPa,OAAO,CAAEA,OAFF,CAAD,CAAR,CAJkC,qFASlCE,OAAO,CAACC,GAAR,eATkC,uEAAN,kEAAzB,CAaP,MAAO,IAAMe,gBAAe,6FAAG,kLACNtB,MAAK,CAACP,QAAQ,CAAG,mBAAZ,CADC,QACvBQ,QADuB,uCAEXA,SAAQ,CAACE,IAAT,EAFW,QAEvBoB,GAFuB,iDAGtBA,GAHsB,0DAAH,kBAAfD,gBAAe,2CAArB"},"metadata":{},"sourceType":"module"}