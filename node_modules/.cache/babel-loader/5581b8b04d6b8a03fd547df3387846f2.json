{"ast":null,"code":"import _toConsumableArray from\"/Users/vw7u456/projects/abschluss2/g3t6_zwischenpruefung_jahr2_gruppe07/configurator-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/vw7u456/projects/abschluss2/g3t6_zwischenpruefung_jahr2_gruppe07/configurator-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{SET_ENGINE,SET_COLOR,SET_EXTRAS,SET_INTERIOR,SET_WHEEL,CALCULATE_PRICE,SET_MODEL}from\"../actions/SelectAction\";import{SAVE_CONFIG,NEW_CONFIG}from\"../actions/FetchAction\";var currentState=JSON.parse(localStorage.getItem(\"currentConfig\"));var initialState=currentState?currentState:{model:\"\",engine:\"\",color:\"\",interior:\"\",wheels:\"\",extra:[],price:\"\",id:\"\"};var nextState;var ConfigurationReducer=function ConfigurationReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case SET_MODEL:nextState=_objectSpread(_objectSpread({},state),{},{model:action.payload});localStorage.setItem(\"currentConfig\",JSON.stringify(nextState));return nextState;case SET_ENGINE:nextState=_objectSpread(_objectSpread({},state),{},{engine:action.payload});localStorage.setItem(\"currentConfig\",JSON.stringify(nextState));return nextState;case SET_COLOR:nextState=_objectSpread(_objectSpread({},state),{},{color:action.payload});localStorage.setItem(\"currentConfig\",JSON.stringify(nextState));return nextState;case SET_EXTRAS:if(state.extra.map(function(extra){return extra.id;}).includes(action.payload.id)){nextState=_objectSpread(_objectSpread({},state),{},{extra:[]});state.extra.forEach(function(extra){if(extra.id!==action.payload.id){nextState.extra=[].concat(_toConsumableArray(nextState.extra),[extra]);}});localStorage.setItem(\"currentConfig\",JSON.stringify(nextState));return nextState;}else{nextState=_objectSpread(_objectSpread({},state),{},{extra:[].concat(_toConsumableArray(state.extra),[action.payload])});localStorage.setItem(\"currentConfig\",JSON.stringify(nextState));return nextState;}case SET_INTERIOR:nextState=_objectSpread(_objectSpread({},state),{},{interior:action.payload});localStorage.setItem(\"currentConfig\",JSON.stringify(nextState));return nextState;case SET_WHEEL:nextState=_objectSpread(_objectSpread({},state),{},{wheels:action.payload});localStorage.setItem(\"currentConfig\",JSON.stringify(nextState));return nextState;case SAVE_CONFIG:nextState=_objectSpread(_objectSpread({},state),{},{savedConfiguration:action.payload});localStorage.setItem(\"currentConfig\",JSON.stringify(nextState));return state;case NEW_CONFIG:var model=action.payload.carConfigAttributes.find(function(attribute){return attribute.type===\"model\";});var engine=action.payload.carConfigAttributes.find(function(attribute){return attribute.type===\"engine\";});var color=action.payload.carConfigAttributes.find(function(attribute){return attribute.type===\"color\";});var interior=action.payload.carConfigAttributes.find(function(attribute){return attribute.type===\"interior\";});var wheels=action.payload.carConfigAttributes.find(function(attribute){return attribute.type===\"wheel\";});var extra=action.payload.carConfigAttributes.filter(function(attribute){return attribute.type===\"extra\";});var id=action.payload.id;return{model:model?model:\"\",engine:engine?engine:\"\",color:color?color:\"\",interior:interior?interior:\"\",wheels:wheels?wheels:\"\",extra:extra?extra:[],price:\"\",id:id?id:\"\"};case CALCULATE_PRICE:var newPrice=0;var attributes=[state.model,state.engine,state.color,state.interior,state.wheels];state.extra.forEach(function(extra){return extra!==undefined?extra.priceInCents?newPrice+=extra.priceInCents:0:0;});attributes.forEach(function(attribute){return attribute!==undefined?attribute.priceInCents?newPrice+=attribute.priceInCents:0:0;});var formattedPrice=\"\".concat(newPrice).slice(-1)===\"0\"?\"\".concat(newPrice/100,\"0\\u20AC\"):\"\".concat(newPrice/100,\"\\u20AC\");nextState=_objectSpread(_objectSpread({},state),{},{price:formattedPrice});localStorage.setItem(\"currentConfig\",JSON.stringify(nextState));return nextState;default:return state;}};export default ConfigurationReducer;","map":{"version":3,"names":["SET_ENGINE","SET_COLOR","SET_EXTRAS","SET_INTERIOR","SET_WHEEL","CALCULATE_PRICE","SET_MODEL","SAVE_CONFIG","NEW_CONFIG","currentState","JSON","parse","localStorage","getItem","initialState","model","engine","color","interior","wheels","extra","price","id","nextState","ConfigurationReducer","state","action","type","payload","setItem","stringify","map","includes","forEach","savedConfiguration","carConfigAttributes","find","attribute","filter","newPrice","attributes","undefined","priceInCents","formattedPrice","slice"],"sources":["/Users/vw7u456/projects/abschluss2/g3t6_zwischenpruefung_jahr2_gruppe07/configurator-frontend/src/reducer/ConfigurationReducer.js"],"sourcesContent":["import { SET_ENGINE, SET_COLOR, SET_EXTRAS, SET_INTERIOR, SET_WHEEL, CALCULATE_PRICE, SET_MODEL } from \"../actions/SelectAction\"\nimport { SAVE_CONFIG, NEW_CONFIG } from \"../actions/FetchAction\"\n\nconst currentState = JSON.parse(localStorage.getItem(\"currentConfig\"));\n\nlet initialState = currentState ? currentState : {\n    model: \"\",\n    engine: \"\",\n    color: \"\",\n    interior: \"\",\n    wheels: \"\",\n    extra: [],\n    price: \"\",\n    id: \"\"\n}\n\nlet nextState;\n\nconst ConfigurationReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case SET_MODEL:\n            nextState = { ...state, model: action.payload }\n            localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n            return nextState;\n        case SET_ENGINE:\n            nextState = { ...state, engine: action.payload }\n            localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n            return nextState;\n        case SET_COLOR:\n            nextState = { ...state, color: action.payload }\n            localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n            return nextState;\n        case SET_EXTRAS:\n            if (state.extra.map(extra => extra.id).includes(action.payload.id)) {\n                nextState = { ...state, extra: [] };\n                state.extra.forEach(extra => {\n                    if (extra.id !== action.payload.id) {\n                        nextState.extra = [...nextState.extra, extra]\n                    }\n                })\n                localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n                return nextState;\n            }\n            else {\n                nextState = { ...state, extra: [...state.extra, action.payload] }\n                localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n                return nextState;\n            }\n        case SET_INTERIOR:\n            nextState = { ...state, interior: action.payload };\n            localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n            return nextState;\n        case SET_WHEEL:\n            nextState = { ...state, wheels: action.payload };\n            localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n            return nextState;\n        case SAVE_CONFIG:\n            nextState = { ...state, savedConfiguration: action.payload };\n            localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n            return state;\n        case NEW_CONFIG:\n            let model = action.payload.carConfigAttributes.find(attribute => attribute.type === \"model\");\n            let engine = action.payload.carConfigAttributes.find(attribute => attribute.type === \"engine\");\n            let color = action.payload.carConfigAttributes.find(attribute => attribute.type === \"color\");\n            let interior = action.payload.carConfigAttributes.find(attribute => attribute.type === \"interior\");\n            let wheels = action.payload.carConfigAttributes.find(attribute => attribute.type === \"wheel\");\n            let extra = action.payload.carConfigAttributes.filter(attribute => attribute.type === \"extra\");\n            let id = action.payload.id;\n            return {\n                model: model ? model : \"\",\n                engine: engine ? engine : \"\",\n                color: color ? color : \"\",\n                interior: interior ? interior : \"\",\n                wheels: wheels ? wheels : \"\",\n                extra: extra ? extra : [],\n                price: \"\",\n                id: id ? id : \"\",\n            }\n        case CALCULATE_PRICE:\n            let newPrice = 0;\n            const attributes = [state.model, state.engine, state.color, state.interior, state.wheels]\n            state.extra.forEach(extra => extra !== undefined ? extra.priceInCents ? newPrice += extra.priceInCents : 0 : 0)\n            attributes.forEach(attribute => attribute !== undefined ? attribute.priceInCents ? newPrice += attribute.priceInCents : 0 : 0)\n            let formattedPrice = `${newPrice}`.slice(-1) === \"0\" ? `${newPrice / 100}0€` : `${newPrice / 100}€`\n            nextState = { ...state, price: formattedPrice };\n            localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n            return nextState;\n        default:\n            return state;\n    }\n}\nexport default ConfigurationReducer;"],"mappings":"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"},"metadata":{},"sourceType":"module"}