{"ast":null,"code":"import { SET_ENGINE, SET_COLOR, SET_EXTRAS, SET_INTERIOR, SET_WHEEL, CALCULATE_PRICE, SET_MODEL } from \"../actions/SelectAction\";\nimport { SAVE_CONFIG, NEW_CONFIG } from \"../actions/FetchAction\";\nconst currentState = JSON.parse(localStorage.getItem(\"currentConfig\"));\nlet initialState = currentState ? currentState : {\n  model: \"\",\n  engine: \"\",\n  color: \"\",\n  interior: \"\",\n  wheels: \"\",\n  extra: [],\n  price: \"\",\n  id: \"\"\n};\nlet nextState;\n\nconst ConfigurationReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case SET_MODEL:\n      nextState = { ...state,\n        model: action.payload\n      };\n      localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n      return nextState;\n\n    case SET_ENGINE:\n      nextState = { ...state,\n        engine: action.payload\n      };\n      localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n      return nextState;\n\n    case SET_COLOR:\n      nextState = { ...state,\n        color: action.payload\n      };\n      localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n      return nextState;\n\n    case SET_EXTRAS:\n      if (state.extra.map(extra => extra.id).includes(action.payload.id)) {\n        nextState = { ...state,\n          extra: []\n        };\n        state.extra.forEach(extra => {\n          if (extra.id !== action.payload.id) {\n            nextState.extra = [...nextState.extra, extra];\n          }\n        });\n        localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n        return nextState;\n      } else {\n        nextState = { ...state,\n          extra: [...state.extra, action.payload]\n        };\n        localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n        return nextState;\n      }\n\n    case SET_INTERIOR:\n      nextState = { ...state,\n        interior: action.payload\n      };\n      localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n      return nextState;\n\n    case SET_WHEEL:\n      nextState = { ...state,\n        wheels: action.payload\n      };\n      localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n      return nextState;\n\n    case SAVE_CONFIG:\n      nextState = { ...state,\n        savedConfiguration: action.payload\n      };\n      localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n      return state;\n\n    case NEW_CONFIG:\n      let model = action.payload.carConfigAttributes.find(attribute => attribute.type === \"model\");\n      let engine = action.payload.carConfigAttributes.find(attribute => attribute.type === \"engine\");\n      let color = action.payload.carConfigAttributes.find(attribute => attribute.type === \"color\");\n      let interior = action.payload.carConfigAttributes.find(attribute => attribute.type === \"interior\");\n      let wheels = action.payload.carConfigAttributes.find(attribute => attribute.type === \"wheel\");\n      let extra = action.payload.carConfigAttributes.filter(attribute => attribute.type === \"extra\");\n      let id = action.payload.id;\n      return {\n        model: model ? model : \"\",\n        engine: engine ? engine : \"\",\n        color: color ? color : \"\",\n        interior: interior ? interior : \"\",\n        wheels: wheels ? wheels : \"\",\n        extra: extra ? extra : [],\n        price: \"\",\n        id: id ? id : \"\"\n      };\n\n    case CALCULATE_PRICE:\n      let newPrice = 0;\n      const attributes = [state.model, state.engine, state.color, state.interior, state.wheels];\n      state.extra.forEach(extra => extra !== undefined ? extra.priceInCents ? newPrice += extra.priceInCents : 0 : 0);\n      attributes.forEach(attribute => attribute !== undefined ? attribute.priceInCents ? newPrice += attribute.priceInCents : 0 : 0);\n      let formattedPrice = `${newPrice}`.slice(-1) === \"0\" ? `${newPrice / 100}0€` : `${newPrice / 100}€`;\n      nextState = { ...state,\n        price: formattedPrice\n      };\n      localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n      return nextState;\n\n    default:\n      return state;\n  }\n};\n\n_c = ConfigurationReducer;\nexport default ConfigurationReducer;\n\nvar _c;\n\n$RefreshReg$(_c, \"ConfigurationReducer\");","map":{"version":3,"names":["SET_ENGINE","SET_COLOR","SET_EXTRAS","SET_INTERIOR","SET_WHEEL","CALCULATE_PRICE","SET_MODEL","SAVE_CONFIG","NEW_CONFIG","currentState","JSON","parse","localStorage","getItem","initialState","model","engine","color","interior","wheels","extra","price","id","nextState","ConfigurationReducer","state","action","type","payload","setItem","stringify","map","includes","forEach","savedConfiguration","carConfigAttributes","find","attribute","filter","newPrice","attributes","undefined","priceInCents","formattedPrice","slice"],"sources":["/Users/vw7u456/projects/abschluss2/g3t6_zwischenpruefung_jahr2_gruppe07/configurator-frontend/src/reducer/ConfigurationReducer.js"],"sourcesContent":["import { SET_ENGINE, SET_COLOR, SET_EXTRAS, SET_INTERIOR, SET_WHEEL, CALCULATE_PRICE, SET_MODEL } from \"../actions/SelectAction\"\nimport { SAVE_CONFIG, NEW_CONFIG } from \"../actions/FetchAction\"\n\nconst currentState = JSON.parse(localStorage.getItem(\"currentConfig\"));\n\nlet initialState = currentState ? currentState : {\n    model: \"\",\n    engine: \"\",\n    color: \"\",\n    interior: \"\",\n    wheels: \"\",\n    extra: [],\n    price: \"\",\n    id: \"\"\n}\n\nlet nextState;\n\nconst ConfigurationReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case SET_MODEL:\n            nextState = { ...state, model: action.payload }\n            localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n            return nextState;\n        case SET_ENGINE:\n            nextState = { ...state, engine: action.payload }\n            localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n            return nextState;\n        case SET_COLOR:\n            nextState = { ...state, color: action.payload }\n            localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n            return nextState;\n        case SET_EXTRAS:\n            if (state.extra.map(extra => extra.id).includes(action.payload.id)) {\n                nextState = { ...state, extra: [] };\n                state.extra.forEach(extra => {\n                    if (extra.id !== action.payload.id) {\n                        nextState.extra = [...nextState.extra, extra]\n                    }\n                })\n                localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n                return nextState;\n            }\n            else {\n                nextState = { ...state, extra: [...state.extra, action.payload] }\n                localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n                return nextState;\n            }\n        case SET_INTERIOR:\n            nextState = { ...state, interior: action.payload };\n            localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n            return nextState;\n        case SET_WHEEL:\n            nextState = { ...state, wheels: action.payload };\n            localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n            return nextState;\n        case SAVE_CONFIG:\n            nextState = { ...state, savedConfiguration: action.payload };\n            localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n            return state;\n        case NEW_CONFIG:\n            let model = action.payload.carConfigAttributes.find(attribute => attribute.type === \"model\");\n            let engine = action.payload.carConfigAttributes.find(attribute => attribute.type === \"engine\");\n            let color = action.payload.carConfigAttributes.find(attribute => attribute.type === \"color\");\n            let interior = action.payload.carConfigAttributes.find(attribute => attribute.type === \"interior\");\n            let wheels = action.payload.carConfigAttributes.find(attribute => attribute.type === \"wheel\");\n            let extra = action.payload.carConfigAttributes.filter(attribute => attribute.type === \"extra\");\n            let id = action.payload.id;\n            return {\n                model: model ? model : \"\",\n                engine: engine ? engine : \"\",\n                color: color ? color : \"\",\n                interior: interior ? interior : \"\",\n                wheels: wheels ? wheels : \"\",\n                extra: extra ? extra : [],\n                price: \"\",\n                id: id ? id : \"\",\n            }\n        case CALCULATE_PRICE:\n            let newPrice = 0;\n            const attributes = [state.model, state.engine, state.color, state.interior, state.wheels]\n            state.extra.forEach(extra => extra !== undefined ? extra.priceInCents ? newPrice += extra.priceInCents : 0 : 0)\n            attributes.forEach(attribute => attribute !== undefined ? attribute.priceInCents ? newPrice += attribute.priceInCents : 0 : 0)\n            let formattedPrice = `${newPrice}`.slice(-1) === \"0\" ? `${newPrice / 100}0€` : `${newPrice / 100}€`\n            nextState = { ...state, price: formattedPrice };\n            localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n            return nextState;\n        default:\n            return state;\n    }\n}\nexport default ConfigurationReducer;"],"mappings":"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"},"metadata":{},"sourceType":"module"}