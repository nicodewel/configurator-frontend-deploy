{"ast":null,"code":"import { SET_ENGINE, SET_COLOR, SET_EXTRAS, SET_INTERIOR, SET_WHEEL } from \"../actions/SelectAction\";\nimport { SAVE_CONFIG, NEW_CONFIG } from \"../actions/FetchAction\";\nconst currentState = JSON.parse(localStorage.getItem(\"currentConfig\"));\nlet initialState = currentState ? currentState : {\n  engine: \"\",\n  color: \"\",\n  interior: \"\",\n  wheels: \"\",\n  extra: [],\n  savedConfiguration: {}\n};\nlet nextState;\n\nconst ConfigurationReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case SET_ENGINE:\n      nextState = { ...state,\n        engine: action.payload\n      };\n      localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n      return nextState;\n\n    case SET_COLOR:\n      nextState = { ...state,\n        color: action.payload\n      };\n      localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n      return nextState;\n\n    case SET_EXTRAS:\n      if (state.extra.includes(action.payload)) {\n        nextState = { ...state,\n          extra: []\n        };\n        state.extra.forEach(extra => {\n          if (extra !== action.payload) {\n            nextState.extra = [...nextState.extra, extra];\n          }\n        });\n        localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n        return nextState;\n      } else {\n        nextState = { ...state,\n          extra: [...state.extra, action.payload]\n        };\n        localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n        return nextState;\n      }\n\n    case SET_INTERIOR:\n      nextState = { ...state,\n        interior: action.payload\n      };\n      localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n      return nextState;\n\n    case SET_WHEEL:\n      nextState = { ...state,\n        wheels: action.payload\n      };\n      localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n      return nextState;\n\n    case SAVE_CONFIG:\n      nextState = { ...state,\n        savedConfiguration: action.payload\n      };\n      localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n      return nextState;\n\n    case NEW_CONFIG:\n      console.log(\"*****\");\n      console.log(action.action);\n      console.log(\"*****\");\n      let engine = action.payload.find(attribute => attribute.type === engine);\n      let color = action.payload.find(attribute => attribute.type === color);\n      let interior = action.payload.find(attribute => attribute.type === interior);\n      let wheels = action.payload.find(attribute => attribute.type === wheels);\n      let extra = action.payload.filter(attribute => attribute.type === extra);\n      return {\n        engine: engine ? engine : \"\",\n        color: color ? color : \"\",\n        interior: interior ? interior : \"\",\n        wheels: wheels ? wheels : \"\",\n        extra: extra ? extra : [],\n        savedConfiguration: {}\n      };\n\n    default:\n      return state;\n  }\n};\n\n_c = ConfigurationReducer;\nexport default ConfigurationReducer;\n\nvar _c;\n\n$RefreshReg$(_c, \"ConfigurationReducer\");","map":{"version":3,"names":["SET_ENGINE","SET_COLOR","SET_EXTRAS","SET_INTERIOR","SET_WHEEL","SAVE_CONFIG","NEW_CONFIG","currentState","JSON","parse","localStorage","getItem","initialState","engine","color","interior","wheels","extra","savedConfiguration","nextState","ConfigurationReducer","state","action","type","payload","setItem","stringify","includes","forEach","console","log","find","attribute","filter"],"sources":["/Users/vw7u456/projects/abschluss2/g3t6_zwischenpruefung_jahr2_gruppe07/configurator-frontend/src/reducer/ConfigurationReducer.js"],"sourcesContent":["import { SET_ENGINE, SET_COLOR, SET_EXTRAS, SET_INTERIOR, SET_WHEEL } from \"../actions/SelectAction\"\nimport { SAVE_CONFIG, NEW_CONFIG } from \"../actions/FetchAction\"\n\nconst currentState = JSON.parse(localStorage.getItem(\"currentConfig\"));\n\nlet initialState = currentState ? currentState : {\n    engine: \"\",\n    color: \"\",\n    interior: \"\",\n    wheels: \"\",\n    extra: [],\n    savedConfiguration: {},\n};\nlet nextState;\n\nconst ConfigurationReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case SET_ENGINE:\n            nextState = { ...state, engine: action.payload }\n            localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n            return nextState;\n        case SET_COLOR:\n            nextState = { ...state, color: action.payload }\n            localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n            return nextState;\n        case SET_EXTRAS:\n            if (state.extra.includes(action.payload)) {\n                nextState = { ...state, extra: [] };\n                state.extra.forEach(extra => {\n                    if (extra !== action.payload) {\n                        nextState.extra = [...nextState.extra, extra]\n                    }\n                })\n                localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n                return nextState;\n            }\n            else {\n                nextState = { ...state, extra: [...state.extra, action.payload] }\n                localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n                return nextState;\n            }\n        case SET_INTERIOR:\n            nextState = { ...state, interior: action.payload };\n            localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n            return nextState;\n        case SET_WHEEL:\n            nextState = { ...state, wheels: action.payload };\n            localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n            return nextState;\n        case SAVE_CONFIG:\n            nextState = { ...state, savedConfiguration: action.payload };\n            localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n            return nextState;\n        case NEW_CONFIG:\n            console.log(\"*****\")\n            console.log(action.action)\n            console.log(\"*****\")\n            let engine = action.payload.find(attribute => attribute.type === engine);\n            let color = action.payload.find(attribute => attribute.type === color);\n            let interior = action.payload.find(attribute => attribute.type === interior);\n            let wheels = action.payload.find(attribute => attribute.type === wheels);\n            let extra = action.payload.filter(attribute => attribute.type === extra);\n\n\n            return {\n                engine: engine ? engine : \"\",\n                color: color ? color : \"\",\n                interior: interior ? interior : \"\",\n                wheels: wheels ? wheels : \"\",\n                extra: extra ? extra : [],\n                savedConfiguration: {},\n            }\n        default:\n            return state;\n    }\n}\nexport default ConfigurationReducer;"],"mappings":"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"},"metadata":{},"sourceType":"module"}