{"ast":null,"code":"import { SET_ENGINE, SET_COLOR, SET_EXTRAS, SET_INTERIOR, SET_WHEEL, CALCULATE_PRICE, SET_MODEL } from \"../actions/SelectAction\";\nimport { SAVE_CONFIG, NEW_CONFIG } from \"../actions/FetchAction\";\nconst currentState = JSON.parse(localStorage.getItem(\"currentConfig\"));\nlet initialState = currentState ? currentState : {\n  model: \"\",\n  engine: \"\",\n  color: \"\",\n  interior: \"\",\n  wheels: \"\",\n  extra: [],\n  price: \"\" // savedConfiguration: {},\n\n};\nlet nextState;\n\nconst ConfigurationReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case SET_MODEL:\n      nextState = { ...state,\n        model: action.payload\n      };\n      localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n      return nextState;\n\n    case SET_ENGINE:\n      nextState = { ...state,\n        engine: action.payload\n      };\n      localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n      return nextState;\n\n    case SET_COLOR:\n      nextState = { ...state,\n        color: action.payload\n      };\n      localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n      return nextState;\n\n    case SET_EXTRAS:\n      if (state.extra.map(extra => extra.id).includes(action.payload.id)) {\n        nextState = { ...state,\n          extra: []\n        };\n        state.extra.forEach(extra => {\n          if (extra.id !== action.payload.id) {\n            nextState.extra = [...nextState.extra, extra];\n          }\n        });\n        localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n        return nextState;\n      } else {\n        nextState = { ...state,\n          extra: [...state.extra, action.payload]\n        };\n        localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n        return nextState;\n      }\n\n    case SET_INTERIOR:\n      nextState = { ...state,\n        interior: action.payload\n      };\n      localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n      return nextState;\n\n    case SET_WHEEL:\n      nextState = { ...state,\n        wheels: action.payload\n      };\n      localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n      return nextState;\n\n    case SAVE_CONFIG:\n      // nextState = { ...state, savedConfiguration: action.payload };\n      // localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n      return state;\n\n    case NEW_CONFIG:\n      let model = action.payload.carConfigAttributes.find(attribute => attribute.type === \"model\");\n      let engine = action.payload.carConfigAttributes.find(attribute => attribute.type === \"engine\");\n      let color = action.payload.carConfigAttributes.find(attribute => attribute.type === \"color\");\n      let interior = action.payload.carConfigAttributes.find(attribute => attribute.type === \"interior\");\n      let wheels = action.payload.carConfigAttributes.find(attribute => attribute.type === \"wheel\");\n      let extra = action.payload.carConfigAttributes.filter(attribute => attribute.type === \"extra\");\n      return {\n        model: model ? model : \"\",\n        engine: engine ? engine : \"\",\n        color: color ? color : \"\",\n        interior: interior ? interior : \"\",\n        wheels: wheels ? wheels : \"\",\n        extra: extra ? extra : [],\n        price: \"\" // savedConfiguration: {},\n\n      };\n\n    case CALCULATE_PRICE:\n      let newPrice = 0;\n      const attributes = [state.model, state.engine, state.color, state.interior, state.wheels];\n      state.extra.forEach(extra => extra !== undefined ? extra.priceInCents ? newPrice += extra.priceInCents : 0 : 0);\n      attributes.forEach(attribute => attribute !== undefined ? attribute.priceInCents ? newPrice += attribute.priceInCents : 0 : 0);\n      let formattedPrice = `${newPrice}`.slice(-1) === \"0\" ? `${newPrice / 100}0€` : `${newPrice / 100}€`;\n      nextState = { ...state,\n        price: formattedPrice\n      };\n      localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n      return nextState;\n\n    default:\n      return state;\n  }\n};\n\n_c = ConfigurationReducer;\nexport default ConfigurationReducer;\n\nvar _c;\n\n$RefreshReg$(_c, \"ConfigurationReducer\");","map":{"version":3,"names":["SET_ENGINE","SET_COLOR","SET_EXTRAS","SET_INTERIOR","SET_WHEEL","CALCULATE_PRICE","SET_MODEL","SAVE_CONFIG","NEW_CONFIG","currentState","JSON","parse","localStorage","getItem","initialState","model","engine","color","interior","wheels","extra","price","nextState","ConfigurationReducer","state","action","type","payload","setItem","stringify","map","id","includes","forEach","carConfigAttributes","find","attribute","filter","newPrice","attributes","undefined","priceInCents","formattedPrice","slice"],"sources":["/Users/vw7u456/projects/abschluss2/g3t6_zwischenpruefung_jahr2_gruppe07/configurator-frontend/src/reducer/ConfigurationReducer.js"],"sourcesContent":["import { SET_ENGINE, SET_COLOR, SET_EXTRAS, SET_INTERIOR, SET_WHEEL, CALCULATE_PRICE, SET_MODEL } from \"../actions/SelectAction\"\nimport { SAVE_CONFIG, NEW_CONFIG } from \"../actions/FetchAction\"\n\nconst currentState = JSON.parse(localStorage.getItem(\"currentConfig\"));\n\nlet initialState = currentState ? currentState : {\n    model: \"\",\n    engine: \"\",\n    color: \"\",\n    interior: \"\",\n    wheels: \"\",\n    extra: [],\n    price: \"\",\n    // savedConfiguration: {},\n};\nlet nextState;\n\nconst ConfigurationReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case SET_MODEL:\n            nextState = { ...state, model: action.payload }\n            localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n            return nextState;\n        case SET_ENGINE:\n            nextState = { ...state, engine: action.payload }\n            localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n            return nextState;\n        case SET_COLOR:\n            nextState = { ...state, color: action.payload }\n            localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n            return nextState;\n        case SET_EXTRAS:\n            if (state.extra.map(extra => extra.id).includes(action.payload.id)) {\n                nextState = { ...state, extra: [] };\n                state.extra.forEach(extra => {\n                    if (extra.id !== action.payload.id) {\n                        nextState.extra = [...nextState.extra, extra]\n                    }\n                })\n                localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n                return nextState;\n            }\n            else {\n                nextState = { ...state, extra: [...state.extra, action.payload] }\n                localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n                return nextState;\n            }\n        case SET_INTERIOR:\n            nextState = { ...state, interior: action.payload };\n            localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n            return nextState;\n        case SET_WHEEL:\n            nextState = { ...state, wheels: action.payload };\n            localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n            return nextState;\n        case SAVE_CONFIG:\n            // nextState = { ...state, savedConfiguration: action.payload };\n            // localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n            return state;\n        case NEW_CONFIG:\n            let model = action.payload.carConfigAttributes.find(attribute => attribute.type === \"model\");\n            let engine = action.payload.carConfigAttributes.find(attribute => attribute.type === \"engine\");\n            let color = action.payload.carConfigAttributes.find(attribute => attribute.type === \"color\");\n            let interior = action.payload.carConfigAttributes.find(attribute => attribute.type === \"interior\");\n            let wheels = action.payload.carConfigAttributes.find(attribute => attribute.type === \"wheel\");\n            let extra = action.payload.carConfigAttributes.filter(attribute => attribute.type === \"extra\");\n            return {\n                model: model ? model : \"\",\n                engine: engine ? engine : \"\",\n                color: color ? color : \"\",\n                interior: interior ? interior : \"\",\n                wheels: wheels ? wheels : \"\",\n                extra: extra ? extra : [],\n                price: \"\",\n                // savedConfiguration: {},\n            }\n        case CALCULATE_PRICE:\n            let newPrice = 0;\n            const attributes = [state.model, state.engine, state.color, state.interior, state.wheels]\n            state.extra.forEach(extra => extra !== undefined ? extra.priceInCents ? newPrice += extra.priceInCents : 0 : 0)\n            attributes.forEach(attribute => attribute !== undefined ? attribute.priceInCents ? newPrice += attribute.priceInCents : 0 : 0)\n            let formattedPrice = `${newPrice}`.slice(-1) === \"0\" ? `${newPrice / 100}0€` : `${newPrice / 100}€`\n            nextState = { ...state, price: formattedPrice };\n            localStorage.setItem(\"currentConfig\", JSON.stringify(nextState));\n            return nextState;\n        default:\n            return state;\n    }\n}\nexport default ConfigurationReducer;"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,SAArB,EAAgCC,UAAhC,EAA4CC,YAA5C,EAA0DC,SAA1D,EAAqEC,eAArE,EAAsFC,SAAtF,QAAuG,yBAAvG;AACA,SAASC,WAAT,EAAsBC,UAAtB,QAAwC,wBAAxC;AAEA,MAAMC,YAAY,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAX,CAArB;AAEA,IAAIC,YAAY,GAAGL,YAAY,GAAGA,YAAH,GAAkB;EAC7CM,KAAK,EAAE,EADsC;EAE7CC,MAAM,EAAE,EAFqC;EAG7CC,KAAK,EAAE,EAHsC;EAI7CC,QAAQ,EAAE,EAJmC;EAK7CC,MAAM,EAAE,EALqC;EAM7CC,KAAK,EAAE,EANsC;EAO7CC,KAAK,EAAE,EAPsC,CAQ7C;;AAR6C,CAAjD;AAUA,IAAIC,SAAJ;;AAEA,MAAMC,oBAAoB,GAAG,YAAkC;EAAA,IAAjCC,KAAiC,uEAAzBV,YAAyB;EAAA,IAAXW,MAAW;;EAC3D,QAAQA,MAAM,CAACC,IAAf;IACI,KAAKpB,SAAL;MACIgB,SAAS,GAAG,EAAE,GAAGE,KAAL;QAAYT,KAAK,EAAEU,MAAM,CAACE;MAA1B,CAAZ;MACAf,YAAY,CAACgB,OAAb,CAAqB,eAArB,EAAsClB,IAAI,CAACmB,SAAL,CAAeP,SAAf,CAAtC;MACA,OAAOA,SAAP;;IACJ,KAAKtB,UAAL;MACIsB,SAAS,GAAG,EAAE,GAAGE,KAAL;QAAYR,MAAM,EAAES,MAAM,CAACE;MAA3B,CAAZ;MACAf,YAAY,CAACgB,OAAb,CAAqB,eAArB,EAAsClB,IAAI,CAACmB,SAAL,CAAeP,SAAf,CAAtC;MACA,OAAOA,SAAP;;IACJ,KAAKrB,SAAL;MACIqB,SAAS,GAAG,EAAE,GAAGE,KAAL;QAAYP,KAAK,EAAEQ,MAAM,CAACE;MAA1B,CAAZ;MACAf,YAAY,CAACgB,OAAb,CAAqB,eAArB,EAAsClB,IAAI,CAACmB,SAAL,CAAeP,SAAf,CAAtC;MACA,OAAOA,SAAP;;IACJ,KAAKpB,UAAL;MACI,IAAIsB,KAAK,CAACJ,KAAN,CAAYU,GAAZ,CAAgBV,KAAK,IAAIA,KAAK,CAACW,EAA/B,EAAmCC,QAAnC,CAA4CP,MAAM,CAACE,OAAP,CAAeI,EAA3D,CAAJ,EAAoE;QAChET,SAAS,GAAG,EAAE,GAAGE,KAAL;UAAYJ,KAAK,EAAE;QAAnB,CAAZ;QACAI,KAAK,CAACJ,KAAN,CAAYa,OAAZ,CAAoBb,KAAK,IAAI;UACzB,IAAIA,KAAK,CAACW,EAAN,KAAaN,MAAM,CAACE,OAAP,CAAeI,EAAhC,EAAoC;YAChCT,SAAS,CAACF,KAAV,GAAkB,CAAC,GAAGE,SAAS,CAACF,KAAd,EAAqBA,KAArB,CAAlB;UACH;QACJ,CAJD;QAKAR,YAAY,CAACgB,OAAb,CAAqB,eAArB,EAAsClB,IAAI,CAACmB,SAAL,CAAeP,SAAf,CAAtC;QACA,OAAOA,SAAP;MACH,CATD,MAUK;QACDA,SAAS,GAAG,EAAE,GAAGE,KAAL;UAAYJ,KAAK,EAAE,CAAC,GAAGI,KAAK,CAACJ,KAAV,EAAiBK,MAAM,CAACE,OAAxB;QAAnB,CAAZ;QACAf,YAAY,CAACgB,OAAb,CAAqB,eAArB,EAAsClB,IAAI,CAACmB,SAAL,CAAeP,SAAf,CAAtC;QACA,OAAOA,SAAP;MACH;;IACL,KAAKnB,YAAL;MACImB,SAAS,GAAG,EAAE,GAAGE,KAAL;QAAYN,QAAQ,EAAEO,MAAM,CAACE;MAA7B,CAAZ;MACAf,YAAY,CAACgB,OAAb,CAAqB,eAArB,EAAsClB,IAAI,CAACmB,SAAL,CAAeP,SAAf,CAAtC;MACA,OAAOA,SAAP;;IACJ,KAAKlB,SAAL;MACIkB,SAAS,GAAG,EAAE,GAAGE,KAAL;QAAYL,MAAM,EAAEM,MAAM,CAACE;MAA3B,CAAZ;MACAf,YAAY,CAACgB,OAAb,CAAqB,eAArB,EAAsClB,IAAI,CAACmB,SAAL,CAAeP,SAAf,CAAtC;MACA,OAAOA,SAAP;;IACJ,KAAKf,WAAL;MACI;MACA;MACA,OAAOiB,KAAP;;IACJ,KAAKhB,UAAL;MACI,IAAIO,KAAK,GAAGU,MAAM,CAACE,OAAP,CAAeO,mBAAf,CAAmCC,IAAnC,CAAwCC,SAAS,IAAIA,SAAS,CAACV,IAAV,KAAmB,OAAxE,CAAZ;MACA,IAAIV,MAAM,GAAGS,MAAM,CAACE,OAAP,CAAeO,mBAAf,CAAmCC,IAAnC,CAAwCC,SAAS,IAAIA,SAAS,CAACV,IAAV,KAAmB,QAAxE,CAAb;MACA,IAAIT,KAAK,GAAGQ,MAAM,CAACE,OAAP,CAAeO,mBAAf,CAAmCC,IAAnC,CAAwCC,SAAS,IAAIA,SAAS,CAACV,IAAV,KAAmB,OAAxE,CAAZ;MACA,IAAIR,QAAQ,GAAGO,MAAM,CAACE,OAAP,CAAeO,mBAAf,CAAmCC,IAAnC,CAAwCC,SAAS,IAAIA,SAAS,CAACV,IAAV,KAAmB,UAAxE,CAAf;MACA,IAAIP,MAAM,GAAGM,MAAM,CAACE,OAAP,CAAeO,mBAAf,CAAmCC,IAAnC,CAAwCC,SAAS,IAAIA,SAAS,CAACV,IAAV,KAAmB,OAAxE,CAAb;MACA,IAAIN,KAAK,GAAGK,MAAM,CAACE,OAAP,CAAeO,mBAAf,CAAmCG,MAAnC,CAA0CD,SAAS,IAAIA,SAAS,CAACV,IAAV,KAAmB,OAA1E,CAAZ;MACA,OAAO;QACHX,KAAK,EAAEA,KAAK,GAAGA,KAAH,GAAW,EADpB;QAEHC,MAAM,EAAEA,MAAM,GAAGA,MAAH,GAAY,EAFvB;QAGHC,KAAK,EAAEA,KAAK,GAAGA,KAAH,GAAW,EAHpB;QAIHC,QAAQ,EAAEA,QAAQ,GAAGA,QAAH,GAAc,EAJ7B;QAKHC,MAAM,EAAEA,MAAM,GAAGA,MAAH,GAAY,EALvB;QAMHC,KAAK,EAAEA,KAAK,GAAGA,KAAH,GAAW,EANpB;QAOHC,KAAK,EAAE,EAPJ,CAQH;;MARG,CAAP;;IAUJ,KAAKhB,eAAL;MACI,IAAIiC,QAAQ,GAAG,CAAf;MACA,MAAMC,UAAU,GAAG,CAACf,KAAK,CAACT,KAAP,EAAcS,KAAK,CAACR,MAApB,EAA4BQ,KAAK,CAACP,KAAlC,EAAyCO,KAAK,CAACN,QAA/C,EAAyDM,KAAK,CAACL,MAA/D,CAAnB;MACAK,KAAK,CAACJ,KAAN,CAAYa,OAAZ,CAAoBb,KAAK,IAAIA,KAAK,KAAKoB,SAAV,GAAsBpB,KAAK,CAACqB,YAAN,GAAqBH,QAAQ,IAAIlB,KAAK,CAACqB,YAAvC,GAAsD,CAA5E,GAAgF,CAA7G;MACAF,UAAU,CAACN,OAAX,CAAmBG,SAAS,IAAIA,SAAS,KAAKI,SAAd,GAA0BJ,SAAS,CAACK,YAAV,GAAyBH,QAAQ,IAAIF,SAAS,CAACK,YAA/C,GAA8D,CAAxF,GAA4F,CAA5H;MACA,IAAIC,cAAc,GAAI,GAAEJ,QAAS,EAAZ,CAAcK,KAAd,CAAoB,CAAC,CAArB,MAA4B,GAA5B,GAAmC,GAAEL,QAAQ,GAAG,GAAI,IAApD,GAA2D,GAAEA,QAAQ,GAAG,GAAI,GAAjG;MACAhB,SAAS,GAAG,EAAE,GAAGE,KAAL;QAAYH,KAAK,EAAEqB;MAAnB,CAAZ;MACA9B,YAAY,CAACgB,OAAb,CAAqB,eAArB,EAAsClB,IAAI,CAACmB,SAAL,CAAeP,SAAf,CAAtC;MACA,OAAOA,SAAP;;IACJ;MACI,OAAOE,KAAP;EApER;AAsEH,CAvED;;KAAMD,oB;AAwEN,eAAeA,oBAAf"},"metadata":{},"sourceType":"module"}