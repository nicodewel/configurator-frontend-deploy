{"ast":null,"code":"import { getConfigurationAsList } from \"../util/util\";\nimport { CALCULATE_PRICE } from \"./SelectAction\";\nexport const SAVE_CONFIG = \"SAVE_CONFIG\";\nexport const GET_ATTRIBUTES = \"GET_ATTRIBUTES\";\nexport const NEW_CONFIG = \"NEW_CONFIG\";\nconst BASE_URL = process.env.REACT_APP_BACKEND_URL;\nexport const getNewConfig = configId => async dispatch => {\n  try {\n    const response = await fetch(`${BASE_URL}configuration/${configId}`);\n\n    if (await !response.ok) {\n      return false;\n    }\n\n    const payload = await response.json();\n    dispatch({\n      type: NEW_CONFIG,\n      payload: payload\n    });\n    dispatch({\n      type: CALCULATE_PRICE\n    });\n  } catch (error) {\n    console.log(error);\n    return false;\n  }\n\n  return true;\n};\nexport const postConfiguration = configuration => async dispatch => {\n  let postObject;\n  let config = getConfigurationAsList(configuration);\n  config = {\n    id: configuration.id,\n    carConfigAttributes: config.slice(0, config.length - 2)\n  };\n\n  try {\n    const response = await fetch(BASE_URL + \"configuration\", {\n      method: \"POST\",\n      body: JSON.stringify(config),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"application/json\"\n      }\n    });\n    postObject = await response.json();\n    dispatch({\n      type: SAVE_CONFIG,\n      payload: postObject\n    });\n  } catch (error) {\n    console.log(error);\n  }\n\n  return postObject;\n};\nexport const getAllAttributes = () => async dispatch => {\n  try {\n    const response = await fetch(BASE_URL + \"attributes\");\n    const payload = await response.json();\n    dispatch({\n      type: GET_ATTRIBUTES,\n      payload: payload\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const getAllConfigIds = async () => {\n  const response = await fetch(BASE_URL + \"configurations/id\");\n  const ids = await response.json();\n  return ids;\n};","map":{"version":3,"names":["getConfigurationAsList","CALCULATE_PRICE","SAVE_CONFIG","GET_ATTRIBUTES","NEW_CONFIG","BASE_URL","process","env","REACT_APP_BACKEND_URL","getNewConfig","configId","dispatch","response","fetch","ok","payload","json","type","error","console","log","postConfiguration","configuration","postObject","config","id","carConfigAttributes","slice","length","method","body","JSON","stringify","headers","getAllAttributes","getAllConfigIds","ids"],"sources":["/Users/vw7u456/projects/abschluss2/g3t6_zwischenpruefung_jahr2_gruppe07/configurator-frontend/src/actions/FetchAction.js"],"sourcesContent":["import { getConfigurationAsList } from \"../util/util\";\nimport { CALCULATE_PRICE } from \"./SelectAction\";\n\nexport const SAVE_CONFIG = \"SAVE_CONFIG\";\nexport const GET_ATTRIBUTES = \"GET_ATTRIBUTES\"\nexport const NEW_CONFIG = \"NEW_CONFIG\"\n\nconst BASE_URL = process.env.REACT_APP_BACKEND_URL\n\n\nexport const getNewConfig = (configId) => async (dispatch) => {\n  try {\n\n    const response = await fetch(`${BASE_URL}configuration/${configId}`);\n    if (await !response.ok) {\n      return false;\n    }\n    const payload = await response.json();\n    dispatch({\n      type: NEW_CONFIG,\n      payload: payload\n    })\n    dispatch({\n      type: CALCULATE_PRICE,\n    })\n  } catch (error) {\n    console.log(error);\n    return false;\n  }\n  return true;\n}\n\nexport const postConfiguration = (configuration) => async (dispatch) => {\n  let postObject;\n  let config = getConfigurationAsList(configuration);\n  config = { id: configuration.id, carConfigAttributes: config.slice(0, config.length - 2) };\n\n  try {\n    const response = await fetch(\n      BASE_URL + \"configuration\",\n      {\n        method: \"POST\",\n        body: JSON.stringify(config),\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Accept\": \"application/json\"\n        }\n      }\n    );\n    postObject = await response.json();\n    dispatch({\n      type: SAVE_CONFIG,\n      payload: postObject\n    });\n  } catch (error) {\n    console.log(error);\n  }\n  return postObject;\n}\n\nexport const getAllAttributes = () => async (dispatch) => {\n  try {\n    const response = await fetch(BASE_URL + \"attributes\");\n    const payload = await response.json();\n    dispatch({\n      type: GET_ATTRIBUTES,\n      payload: payload\n    });\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport const getAllConfigIds = async () => {\n  const response = await fetch(BASE_URL + \"configurations/id\");\n  const ids = await response.json();\n  return ids;\n\n}"],"mappings":"AAAA,SAASA,sBAAT,QAAuC,cAAvC;AACA,SAASC,eAAT,QAAgC,gBAAhC;AAEA,OAAO,MAAMC,WAAW,GAAG,aAApB;AACP,OAAO,MAAMC,cAAc,GAAG,gBAAvB;AACP,OAAO,MAAMC,UAAU,GAAG,YAAnB;AAEP,MAAMC,QAAQ,GAAGC,OAAO,CAACC,GAAR,CAAYC,qBAA7B;AAGA,OAAO,MAAMC,YAAY,GAAIC,QAAD,IAAc,MAAOC,QAAP,IAAoB;EAC5D,IAAI;IAEF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAER,QAAS,iBAAgBK,QAAS,EAAtC,CAA5B;;IACA,IAAI,MAAM,CAACE,QAAQ,CAACE,EAApB,EAAwB;MACtB,OAAO,KAAP;IACD;;IACD,MAAMC,OAAO,GAAG,MAAMH,QAAQ,CAACI,IAAT,EAAtB;IACAL,QAAQ,CAAC;MACPM,IAAI,EAAEb,UADC;MAEPW,OAAO,EAAEA;IAFF,CAAD,CAAR;IAIAJ,QAAQ,CAAC;MACPM,IAAI,EAAEhB;IADC,CAAD,CAAR;EAGD,CAdD,CAcE,OAAOiB,KAAP,EAAc;IACdC,OAAO,CAACC,GAAR,CAAYF,KAAZ;IACA,OAAO,KAAP;EACD;;EACD,OAAO,IAAP;AACD,CApBM;AAsBP,OAAO,MAAMG,iBAAiB,GAAIC,aAAD,IAAmB,MAAOX,QAAP,IAAoB;EACtE,IAAIY,UAAJ;EACA,IAAIC,MAAM,GAAGxB,sBAAsB,CAACsB,aAAD,CAAnC;EACAE,MAAM,GAAG;IAAEC,EAAE,EAAEH,aAAa,CAACG,EAApB;IAAwBC,mBAAmB,EAAEF,MAAM,CAACG,KAAP,CAAa,CAAb,EAAgBH,MAAM,CAACI,MAAP,GAAgB,CAAhC;EAA7C,CAAT;;EAEA,IAAI;IACF,MAAMhB,QAAQ,GAAG,MAAMC,KAAK,CAC1BR,QAAQ,GAAG,eADe,EAE1B;MACEwB,MAAM,EAAE,MADV;MAEEC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeR,MAAf,CAFR;MAGES,OAAO,EAAE;QACP,gBAAgB,kBADT;QAEP,UAAU;MAFH;IAHX,CAF0B,CAA5B;IAWAV,UAAU,GAAG,MAAMX,QAAQ,CAACI,IAAT,EAAnB;IACAL,QAAQ,CAAC;MACPM,IAAI,EAAEf,WADC;MAEPa,OAAO,EAAEQ;IAFF,CAAD,CAAR;EAID,CAjBD,CAiBE,OAAOL,KAAP,EAAc;IACdC,OAAO,CAACC,GAAR,CAAYF,KAAZ;EACD;;EACD,OAAOK,UAAP;AACD,CA1BM;AA4BP,OAAO,MAAMW,gBAAgB,GAAG,MAAM,MAAOvB,QAAP,IAAoB;EACxD,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACR,QAAQ,GAAG,YAAZ,CAA5B;IACA,MAAMU,OAAO,GAAG,MAAMH,QAAQ,CAACI,IAAT,EAAtB;IACAL,QAAQ,CAAC;MACPM,IAAI,EAAEd,cADC;MAEPY,OAAO,EAAEA;IAFF,CAAD,CAAR;EAID,CAPD,CAOE,OAAOG,KAAP,EAAc;IACdC,OAAO,CAACC,GAAR,CAAYF,KAAZ;EACD;AACF,CAXM;AAaP,OAAO,MAAMiB,eAAe,GAAG,YAAY;EACzC,MAAMvB,QAAQ,GAAG,MAAMC,KAAK,CAACR,QAAQ,GAAG,mBAAZ,CAA5B;EACA,MAAM+B,GAAG,GAAG,MAAMxB,QAAQ,CAACI,IAAT,EAAlB;EACA,OAAOoB,GAAP;AAED,CALM"},"metadata":{},"sourceType":"module"}